---
replicaCount: 1

image:
  repository: docker.io/narinder/message-streaming-app
  tag: ""
  pullPolicy: Always

consumer:
  image:
    repository: docker.io/narinder/consumer
    tag: ""
    pullPolicy: Always
  enabled: true
  replicaCount: 10
  resources:
    limits:
      cpu: "500m"
      memory: "512Mi"
    requests:
      cpu: "100m"
      memory: "128Mi"
  hpa:
    enabled: true
    minReplicas: 1
    maxReplicas: 10
    targetCPUUtilizationPercentage: 50
    useMemory: true
    targetMemoryUtilizationPercentage: 70
    # set to "cpu" or "memory" or "both"
    metricType: "both"
  brokerAddr: "message-streaming-app-message-queue:9080"
  port: 8080
  dbAddr: "mongodb://message-streaming-app-mongodb:27017"

producer:
  enabled: true
  schedule: "*/5 * * * *"
  concurrencyPolicy: Allow
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 1
  parallelism: 10
  completions: 10
  resources: {}
  dataHostPath: "/data"
  csvPath: "/data/dcgm_metrics_20250718_134233.csv"
  brokerAddr: "message-streaming-app-message-queue:9080"
  image:
    repository: docker.io/narinder/producer
    tag: ""
    pullPolicy: Always

messageQueue:
  enabled: true
  replicaCount: 1
  resources: {}
  image:
    repository: docker.io/narinder/message-queue
    tag: ""
    pullPolicy: Always
  tcpPort: 9080
  port: 8080

metrics:
  enabled: true
  replicaCount: 1
  resources: {}
  service:
    type: NodePort
    port: 8080
    nodePort: 31002
  image:
    repository: docker.io/narinder/metrics
    tag: ""
    pullPolicy: Always
  port: 8080
  dbAddr: "mongodb://message-streaming-app-mongodb:27017"


mongodb:
  enabled: true
  image:
    repository: mongo
    tag: 5.0
  replicaCount: 1
  resources: {}
  persistence:
    enabled: true
    storageClass: ""
    accessModes: ["ReadWriteOnce"]
    size: 1Gi

service:
  type: ClusterIP
  port: 8080

mongodbService:
  enabled: true
  type: NodePort
  port: 27017
  nodePort: 31001

securityContext:
  runAsUser: 1000
  runAsGroup: 3000
  fsGroup: 2000

probes:
  enabled: true
  liveness:
    path: /healthz
    port: 8080
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readiness:
    path: /ready
    port: 8080
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""
